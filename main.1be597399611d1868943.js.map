{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/notifications.js","webpack:///./js/basicLightbox.js","webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./templates/gallery-template.hbs"],"names":["refs","body","document","querySelector","searchForm","ulGallery","hideSpiner","toastr","options","urlLargeImage","returnCurentImg","e","target","nodeName","console","log","attributes","value","basicLightbox","show","clearDom","innerHTML","KEY","page","queryForPageTwo","isEndPage","fetchImages","query","fetch","then","response","json","data","quantityImg","hits","length","totalHits","markup","galleryTemplate","insertAdjacentHTML","classList","remove","addEventListener","window","fetchImagesNextPages","documentElement","scrollHeight","scrollTop","clientHeight","add","markupNextPage","gallery","firstElementChild","debounce","Handlebars","module","exports","template","container","depth0","helpers","partials","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.1be597399611d1868943.js","sourcesContent":[" const refs = {\r\n     body: document.querySelector('body'),\r\n     searchForm: document.querySelector('.search-form'),\r\n     ulGallery:document.querySelector('.gallery'),\r\n     hideSpiner:document.querySelector('#hide'),\r\n}\r\n\r\n export default refs","import toastr from 'toastr';\r\n\r\n     toastr.options = {\r\n        \"progressBar\": true,\r\n        \"showDuration\": \"0\",\r\n        \"timeOut\": \"2500\",\r\n        \"showMethod\": \"show\",\r\n    }\r\nconst showToastrInfo = () => toastr[\"warning\"](\"По вашему запросу ничего не найдено\",)\r\nconst showToastrSuccess = (quantityImg) =>toastr[\"success\"](`По вашему запросу найдено: ${quantityImg} изображений`)\r\nexport { showToastrInfo, showToastrSuccess }","import * as basicLightbox from 'basiclightbox'\r\n\r\nlet urlLargeImage = ''\r\n\r\nfunction returnCurentImg(e) {\r\n    if (e.target.nodeName === 'IMG') {\r\n        console.log(e);\r\n       urlLargeImage = e.target.attributes[2].value\r\n        const instance = basicLightbox.create(`\r\n    <img src=\"${urlLargeImage}\" width=\"800\" height=\"600\">\r\n`)\r\ninstance.show()\r\n    }\r\n}\r\n\r\n export default returnCurentImg","import galleryTemplate from '../templates/gallery-template.hbs';\r\nimport refs from './refs.js'\r\nimport {showToastrInfo, showToastrSuccess} from './notifications.js'\r\nimport returnCurentImg from './basicLightbox.js'\r\n\r\nconst clearDom = () => refs.ulGallery.innerHTML = ''\r\n\r\nconst KEY = '14396786-a714bdf8d854f524afdc45598';\r\nconst perPage = 12\r\nlet page = 1\r\nlet queryForPageTwo = ''\r\nlet isEndPage = false\r\n\r\nfunction fetchImages(query) {\r\n    queryForPageTwo = query\r\n    page = 1\r\n    isEndPage = false\r\n    fetch(`https://pixabay.com/api/?key=${KEY}&image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=${perPage}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.hits.length === 0) {\r\n                showToastrInfo()\r\n            } else {\r\n                showToastrSuccess(data.totalHits)\r\n            }\r\n            \r\n            const markup = galleryTemplate(data.hits)\r\n            refs.ulGallery.insertAdjacentHTML('beforeend', markup)\r\n            refs.hideSpiner.classList.remove('loader')\r\n\r\n            const gallery = document.querySelector('.gallery');\r\n            gallery.addEventListener('click', returnCurentImg)\r\n\r\n            if (data.hits.length <= 11) {\r\n                isEndPage = true\r\n                console.log('Верхний меньше 11');\r\n                }\r\n        })\r\n    window.addEventListener('scroll', fetchImagesNextPages)\r\n}\r\n// Scroll Event\r\n\r\nfunction fetchImagesNextPages(e) {\r\n    if (isEndPage) {\r\n        refs.hideSpiner.classList.remove('loader')\r\n        return\r\n    }\r\n    const { scrollHeight, scrollTop, clientHeight } = document.documentElement;\r\n    if (scrollTop + clientHeight > scrollHeight - 1) {\r\n        page += 1\r\n        fetch(`https://pixabay.com/api/?key=${KEY}&image_type=photo&orientation=horizontal&q=${queryForPageTwo}&page=${page}&per_page=${perPage}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.hits.length <= 11) {\r\n                    isEndPage = true\r\n                }\r\n               \r\n                refs.hideSpiner.classList.add('loader')\r\n                const markupNextPage = galleryTemplate(data.hits)\r\n                refs.ulGallery.insertAdjacentHTML('beforeend', markupNextPage)\r\n                const gallery = document.querySelector('.gallery');\r\n                console.log(gallery);\r\n                gallery.addEventListener('click', returnCurentImg)\r\n            })\r\n    }\r\n        refs.hideSpiner.classList.remove('loader')\r\n}\r\n\r\nexport  { fetchImages,clearDom }\r\n\r\n","import './styles.css';\r\nimport '../node_modules/basiclightbox/dist/basiclightbox.min.css'\r\nimport refs from './js/refs'\r\nimport { fetchImages,clearDom } from './js/apiService'\r\nimport '../node_modules/toastr/build/toastr.css';\r\nimport debounce from 'lodash.debounce'\r\n\r\n\r\nconst input = refs.searchForm.firstElementChild\r\ninput.addEventListener('input', debounce(getsInputValue, 500))\r\n\r\nlet query = ''\r\nfunction getsInputValue(e) {\r\nquery = e.target.value\r\n     if (query ==='') {\r\n        clearDom()\r\n        return\r\n    }\r\n    refs.hideSpiner.classList.add('loader')\r\n    fetchImages(query)\r\n    clearDom()\r\n\r\n }\r\n\r\n\r\n\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"list-item-gallery\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\\\" data-large-img=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Список <li> с карточками изображений -->\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":27,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}