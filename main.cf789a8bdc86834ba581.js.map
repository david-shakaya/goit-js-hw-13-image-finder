{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/notifications.js","webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./templates/gallery-template.hbs"],"names":["refs","body","document","querySelector","searchForm","sectionGallery","hideSpiner","toastr","options","showToastrInfo","clearDom","innerHTML","KEY","page","queryForPageTwo","isEndPage","urlLargeImage","fetchImagesNextPages","e","classList","remove","documentElement","scrollHeight","scrollTop","clientHeight","fetch","then","response","json","data","hits","length","add","markupNextPage","galleryTemplate","insertAdjacentHTML","returnCurentImg","target","nodeName","attributes","value","basicLightbox","show","firstElementChild","addEventListener","debounce","query","markup","console","log","window","Handlebars","module","exports","template","container","depth0","helpers","partials","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.cf789a8bdc86834ba581.js","sourcesContent":[" const refs = {\r\n     body: document.querySelector('body'),\r\n     searchForm: document.querySelector('.search-form'),\r\n     sectionGallery: document.querySelector('.section-gallery'),\r\n     hideSpiner:document.querySelector('#hide'),\r\n}\r\n\r\n export default refs","import toastr from 'toastr';\r\n\r\n\r\n     toastr.options = {\r\n        \"progressBar\": true,\r\n        \"showDuration\": \"0\",\r\n        \"timeOut\": \"2500\",\r\n        \"showMethod\": \"show\",\r\n    }\r\n const showToastrInfo = () => toastr[\"warning\"](\"По вашему запросу ничего не найдено\",)\r\n// const showToastrError = () =>error(\"Уточните запрос\",\"Ошибка!Такой страны не существует\")\r\nexport default showToastrInfo","import galleryTemplate from '../templates/gallery-template.hbs';\r\nimport refs from './refs.js'\r\nimport showToastrInfo from './notifications.js'\r\n// import instance from './basicLightbox.js'\r\nimport * as basicLightbox from 'basiclightbox'\r\n\r\n     \r\nconst clearDom = () => refs.sectionGallery.innerHTML = ''\r\n\r\nconst KEY = '14396786-a714bdf8d854f524afdc45598';\r\nconst perPage = 12\r\nlet page = 1\r\nlet queryForPageTwo = ''\r\nlet isEndPage = false\r\nlet urlLargeImage = ''\r\n\r\nfunction fetchImages(query) {\r\n    queryForPageTwo = query\r\n    page = 1\r\n    isEndPage = false\r\n    fetch(`https://pixabay.com/api/?key=${KEY}&image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=${perPage}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.hits.length === 0) {\r\n                showToastrInfo()\r\n            }\r\n            const markup = galleryTemplate(data.hits)\r\n            refs.sectionGallery.insertAdjacentHTML('beforeend', markup)\r\n            refs.hideSpiner.classList.remove('loader')\r\n            console.log(page + 'верхний');\r\n// >>>\r\n            // urlLargeImage = data.hits[0].largeImageURL\r\n\r\n            const gallery = document.querySelector('.gallery');\r\n            gallery.addEventListener('click', returnCurentImg)\r\n// >>>>\r\n            if (data.hits.length <= 11) {\r\n                isEndPage = true\r\n                console.log('Верхний меньше 11');\r\n                }\r\n        })\r\n    window.addEventListener('scroll', fetchImagesNextPages)\r\n}\r\n// Scroll Event\r\n\r\nfunction fetchImagesNextPages(e) {\r\n    if (isEndPage) {\r\n        refs.hideSpiner.classList.remove('loader')\r\n        return\r\n    }\r\n    const { scrollHeight, scrollTop, clientHeight } = document.documentElement;\r\n    if (scrollTop + clientHeight > scrollHeight - 1) {\r\n        page += 1\r\n        fetch(`https://pixabay.com/api/?key=${KEY}&image_type=photo&orientation=horizontal&q=${queryForPageTwo}&page=${page}&per_page=${perPage}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.hits.length <= 11) {\r\n                    isEndPage = true\r\n                }\r\n                refs.hideSpiner.classList.add('loader')\r\n                const markupNextPage = galleryTemplate(data.hits)\r\n                refs.sectionGallery.insertAdjacentHTML('beforeend', markupNextPage)\r\n            })\r\n        }\r\n        refs.hideSpiner.classList.remove('loader')\r\n}\r\n\r\nfunction returnCurentImg(e) {\r\n    if (e.target.nodeName === 'IMG') {\r\n       urlLargeImage = e.target.attributes[2].value\r\n        const instance = basicLightbox.create(`\r\n    <img src=\"${urlLargeImage}\" width=\"800\" height=\"600\">\r\n`)\r\ninstance.show()\r\n    }\r\n}\r\n\r\n\r\nexport  { fetchImages,clearDom }\r\n\r\n\r\n\r\n\r\n\r\n\r\n// function fetchCountries() {\r\n//     fetch(`https://restcountries.eu/rest/v2/name/${query}`)\r\n//     .then(response => response.json())\r\n//         .then(data => {\r\n//         if (data.status === 404) {\r\n//                 showToastrError()\r\n//                 return\r\n//         }\r\n//         if (data.length === 1) {\r\n//             clearDom()\r\n//             const markup = oneCountryTemplate(data)\r\n//             refs.markupFromTempl.insertAdjacentHTML('beforeend', markup)\r\n//         }\r\n//         if (data.length > 1 && data.length<10) {\r\n//             const markup = listCountriesTemplate(data)\r\n//             refs.markupFromTempl.insertAdjacentHTML('beforeend', markup)\r\n//         } \r\n//         if (data.length > 10) {\r\n//             showToastrInfo()\r\n//         }\r\n//     })\r\n// }\r\n// export { fetchCountries, refs, clearDom };\r\n\r\n//      toastr.options = {\r\n//         \"progressBar\": true,\r\n//         \"showDuration\": \"0\",\r\n//         \"timeOut\": \"2500\",\r\n//         \"showMethod\": \"show\",\r\n//     }\r\n// const showToastrInfo = () => toastr[\"warning\"](\"Введите более конкретный запрос\", \"Слишком много совпадений\")\r\n// const showToastrError = () =>error(\"Уточните запрос\",\"Ошибка!Такой страны не существует\")\r\n","import './styles.css';\r\nimport '../node_modules/basiclightbox/dist/basiclightbox.min.css'\r\nimport refs from './js/refs'\r\nimport { fetchImages,clearDom } from './js/apiService'\r\nimport '../node_modules/toastr/build/toastr.css';\r\nimport debounce from 'lodash.debounce'\r\n\r\n\r\nconst input = refs.searchForm.firstElementChild\r\ninput.addEventListener('input', debounce(getsInputValue, 500))\r\n\r\nlet query = ''\r\nfunction getsInputValue(e) {\r\nquery = e.target.value\r\n     if (query ==='') {\r\n        clearDom()\r\n        return\r\n    }\r\n    refs.hideSpiner.classList.add('loader')\r\n    fetchImages(query)\r\n    clearDom()\r\n\r\n }\r\n\r\n\r\n\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li class=\\\"list-item-gallery\\\">\\r\\n        <div class=\\\"photo-card\\\">\\r\\n            <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\\\" data-large-img=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" />\\r\\n\\r\\n            <div class=\\\"stats\\\">\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">visibility</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">comment</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n                <p class=\\\"stats-item\\\">\\r\\n                    <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                    \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n                </p>\\r\\n            </div>\\r\\n        </div>\\r\\n    </li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<ul class=\\\"gallery\\\">\\r\\n    <!-- Список <li> с карточками изображений -->\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":4},\"end\":{\"line\":28,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</ul>\";\n},\"useData\":true});"],"sourceRoot":""}